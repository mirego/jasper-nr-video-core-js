<!DOCTYPE html>
<html>
  <head>
    <!-- newrelic browser agent. REMEMBER TO REPLACE THIS SCRIPT WITH YOUR OWN BROWSER AGENT -->
    <!-- <script type="text/javascript" src="agent.js"></script> -->

    <!-- newrelic video core -->
    <script src="../dist/umd/nrvideo.min.js"></script>
  </head>

  <body>
    <video id="myPlayer" controls height="315" width="560">
      <source
        src="http://dl5.webmfiles.org/big-buck-bunny_trailer.webm"
        type="video/mp4"
      />
    </video>
    <script>
      // A toy video tracker
      class MyTracker extends nrvideo.VideoTracker {
        getTrackerName() {
          return "MyTracker";
        }

        getRenditionWidth() {
          return this.player.width;
        }

        getRenditionHeight() {
          return this.player.height;
        }

        getSrc() {
          return this.player.getElementsByTagName("source")[0].src;
        }
      }

      // To check all logs use this
      nrvideo.Log.level = nrvideo.Log.Levels.ALL;

      // // Init tracker
      var myPlayer = document.getElementById("myPlayer");

      const options = {
        info: {
          licenseKey: "YOUR_LICENSE_KEY",
          beacon: "YOUR_BEACON_URL",
          applicationId: "YOUR_APPLICATION_ID",
        },
      };

      let myTracker = new MyTracker(myPlayer, options);

      // to pass all Tracker events to the core
      nrvideo.Core.addTracker(myTracker);

      // Send a sample event
      myTracker.sendVideoCustomAction("CUSTOM_WITH_ATT", "timeSinceCustom");
      myTracker.sendVideoAction("SAMPLE_STARTED", {
        videoElementId: myPlayer.id,
      });

      // use exposed methods
      myTracker.setHarvestInterval(10000);
      myTracker.setUserId("USER_ID");
    </script>
  </body>
</html>
